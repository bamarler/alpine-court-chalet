---
import { property } from "../data/property";

// Icons for specs
const specIcons = {
  bedrooms: `<svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>`,
  bathrooms: `<svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>`,
  guests: `<svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" /></svg>`,
  levels: `<svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>`,
};

const specs = [
  {
    icon: specIcons.bedrooms,
    value: property.specs.bedrooms,
    label: "Bedrooms",
  },
  {
    icon: specIcons.bathrooms,
    value: property.specs.bathrooms,
    label: "Bathrooms",
  },
  { icon: specIcons.guests, value: property.specs.maxGuests, label: "Guests" },
  { icon: specIcons.levels, value: property.specs.levels, label: "Levels" },
];
---

<section id="overview" class="bg-white py-16 sm:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center">
      <h2
        class="text-3xl font-bold tracking-tight text-neutral-900 sm:text-4xl"
      >
        Your Mountain Retreat
      </h2>
      <p class="mx-auto mt-4 max-w-3xl text-lg text-neutral-600">
        {property.description}
      </p>
    </div>

    <!-- Property Specs -->
    <div class="mt-12 grid grid-cols-2 gap-6 sm:grid-cols-4 lg:gap-8">
      {
        specs.map((spec) => (
          <div class="flex flex-col items-center rounded-2xl bg-neutral-50 p-6 text-center">
            <div class="text-primary-600" set:html={spec.icon} />
            <span class="mt-3 text-3xl font-bold text-neutral-900">
              {spec.value}
            </span>
            <span class="mt-1 text-sm font-medium text-neutral-500">
              {spec.label}
            </span>
          </div>
        ))
      }
    </div>

    <!-- Key Amenities -->
    <div id="amenities" class="mt-16">
      <h3 class="text-center text-2xl font-bold text-neutral-900">
        What Makes Us Special
      </h3>
      <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {
          property.amenities.slice(0, 3).map((category) => (
            <div class="rounded-2xl border border-neutral-200 bg-white p-6 shadow-sm">
              <h4 class="text-lg font-semibold text-neutral-900">
                {category.category}
              </h4>
              <ul class="mt-4 space-y-2">
                {category.items.slice(0, 6).map((item) => (
                  <li class="flex items-center gap-2 text-sm text-neutral-600">
                    <svg
                      class="h-4 w-4 flex-shrink-0 text-primary-600"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                    {item.name}
                  </li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>

      <!-- Show All Amenities Link -->
      <div class="mt-8 text-center">
        <button
          id="show-all-amenities"
          type="button"
          class="inline-flex items-center gap-2 text-primary-600 font-medium hover:text-primary-700 transition-colors"
        >
          View all amenities
          <svg
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
          </svg>
        </button>
      </div>

      <!-- All Amenities (Hidden by default) -->
      <div id="all-amenities" class="mt-8 hidden">
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {
            property.amenities.map((category) => (
              <div class="rounded-2xl border border-neutral-200 bg-white p-6">
                <h4 class="text-lg font-semibold text-neutral-900">
                  {category.category}
                </h4>
                <ul class="mt-4 space-y-2">
                  {category.items.map((item) => (
                    <li class="flex items-center gap-2 text-sm text-neutral-600">
                      <svg
                        class="h-4 w-4 flex-shrink-0 text-primary-600"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      {item.name}
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const showAllButton = document.getElementById("show-all-amenities");
  const allAmenities = document.getElementById("all-amenities");
  const previewAmenities = document.querySelector("#amenities > div.grid");

  showAllButton?.addEventListener("click", () => {
    const isHidden = allAmenities?.classList.contains("hidden");

    if (isHidden) {
      allAmenities?.classList.remove("hidden");
      previewAmenities?.classList.add("hidden");
      if (showAllButton) {
        showAllButton.innerHTML = `
          Hide amenities
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
          </svg>
        `;
      }
    } else {
      allAmenities?.classList.add("hidden");
      previewAmenities?.classList.remove("hidden");
      if (showAllButton) {
        showAllButton.innerHTML = `
          View all amenities
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>
        `;
      }
    }
  });
</script>
