---
import { property } from "../data/property";
import Bed from "@lucide/astro/icons/bed";
import Bath from "@lucide/astro/icons/bath";
import Users from "@lucide/astro/icons/users";
import Layers from "@lucide/astro/icons/layers";
import Check from "@lucide/astro/icons/check";
import ChevronDown from "@lucide/astro/icons/chevron-down";
import ChevronUp from "@lucide/astro/icons/chevron-up";

const specs = [
  {
    icon: Bed,
    value: property.specs.bedrooms,
    label: "Bedrooms",
  },
  {
    icon: Bath,
    value: property.specs.bathrooms,
    label: "Bathrooms",
  },
  { icon: Users, value: property.specs.maxGuests, label: "Guests" },
  { icon: Layers, value: property.specs.levels, label: "Levels" },
];
---

<section id="overview" class="bg-white py-16 sm:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center">
      <h2
        class="text-3xl font-bold tracking-tight text-neutral-900 sm:text-4xl"
      >
        Your Mountain Retreat
      </h2>
      <p class="mx-auto mt-4 max-w-3xl text-lg text-neutral-600">
        {property.description}
      </p>
    </div>

    <!-- Property Specs -->
    <div class="mt-12 grid grid-cols-2 gap-6 sm:grid-cols-4 lg:gap-8">
      {
        specs.map((spec) => (
          <div class="flex flex-col items-center rounded-2xl bg-neutral-50 p-6 text-center">
            <div class="text-primary-600">
              <spec.icon class="h-8 w-8" />
            </div>
            <span class="mt-3 text-3xl font-bold text-neutral-900">
              {spec.value}
            </span>
            <span class="mt-1 text-sm font-medium text-neutral-500">
              {spec.label}
            </span>
          </div>
        ))
      }
    </div>

    <!-- Key Amenities -->
    <div id="amenities" class="mt-16 scroll-mt-24">
      <h3 class="text-center text-2xl font-bold text-neutral-900">
        What Makes Us Special
      </h3>
      <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {
          property.amenities.slice(0, 3).map((category) => (
            <div class="rounded-2xl border border-neutral-200 bg-white p-6 shadow-sm">
              <h4 class="text-lg font-semibold text-neutral-900">
                {category.category}
              </h4>
              <ul class="mt-4 space-y-2">
                {category.items.slice(0, 6).map((item) => (
                  <li class="flex items-center gap-2 text-sm text-neutral-600">
                    <Check class="h-4 w-4 flex-shrink-0 text-primary-600" />
                    {item.name}
                  </li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>

      <!-- Show All Amenities Link -->
      <div class="mt-8 text-center">
        <button
          id="show-all-amenities"
          type="button"
          class="inline-flex items-center gap-2 text-primary-600 font-medium hover:text-primary-700 transition-colors"
        >
          <span id="amenities-btn-text">View all amenities</span>
          <span id="amenities-icon-down">
            <ChevronDown class="h-4 w-4" />
          </span>
          <span id="amenities-icon-up" class="hidden">
            <ChevronUp class="h-4 w-4" />
          </span>
        </button>
      </div>

      <!-- All Amenities (Hidden by default) -->
      <div id="all-amenities" class="mt-8 hidden">
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {
            property.amenities.map((category) => (
              <div class="rounded-2xl border border-neutral-200 bg-white p-6">
                <h4 class="text-lg font-semibold text-neutral-900">
                  {category.category}
                </h4>
                <ul class="mt-4 space-y-2">
                  {category.items.map((item) => (
                    <li class="flex items-center gap-2 text-sm text-neutral-600">
                      <Check class="h-4 w-4 flex-shrink-0 text-primary-600" />
                      {item.name}
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const showAllButton = document.getElementById("show-all-amenities");
  const allAmenities = document.getElementById("all-amenities");
  const previewAmenities = document.querySelector("#amenities > div.grid");
  const btnText = document.getElementById("amenities-btn-text");
  const iconDown = document.getElementById("amenities-icon-down");
  const iconUp = document.getElementById("amenities-icon-up");

  showAllButton?.addEventListener("click", () => {
    const isHidden = allAmenities?.classList.contains("hidden");

    if (isHidden) {
      allAmenities?.classList.remove("hidden");
      previewAmenities?.classList.add("hidden");
      if (btnText) {
        btnText.textContent = "Hide amenities";
      }
      iconDown?.classList.add("hidden");
      iconUp?.classList.remove("hidden");
    } else {
      allAmenities?.classList.add("hidden");
      previewAmenities?.classList.remove("hidden");
      if (btnText) {
        btnText.textContent = "View all amenities";
      }
      iconDown?.classList.remove("hidden");
      iconUp?.classList.add("hidden");
    }
  });
</script>
