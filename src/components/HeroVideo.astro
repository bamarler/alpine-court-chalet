---
import { property } from "../data/property";
import { cloudinaryVideo, cloudinaryUrl } from "../lib/cloudinary";
import HeroAnimated from "./HeroAnimated";

interface Props {
  videoId?: string;
  posterImageId?: string;
}

const { videoId = "hero-loop", posterImageId = property.images.hero } =
  Astro.props;

const videoUrl = cloudinaryVideo(videoId, "q_auto");
const posterUrl = cloudinaryUrl(posterImageId, "w_1920,q_auto,f_auto");
---

<section class="relative h-screen w-full overflow-hidden">
  <!-- Video Background -->
  <video
    autoplay
    muted
    loop
    playsinline
    poster={posterUrl}
    class="absolute inset-0 h-full w-full object-cover"
  >
    <source src={`${videoUrl}.webm`} type="video/webm" />
    <source src={`${videoUrl}.mp4`} type="video/mp4" />
    <!-- Fallback image if video doesn't load -->
    <img
      src={posterUrl}
      alt={`${property.name} exterior`}
      class="absolute inset-0 h-full w-full object-cover"
    />
  </video>

  <!-- Gradient Overlay -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/60"
  >
  </div>

  <!-- Animated Content -->
  <HeroAnimated
    client:load
    propertyName={property.name}
    featuredAmenities={property.featuredAmenities}
  />
</section>
